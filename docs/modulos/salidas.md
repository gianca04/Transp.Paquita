# üì§ M√≥dulo de Gesti√≥n de Salidas

## Descripci√≥n General
El m√≥dulo de Gesti√≥n de Salidas permite registrar y controlar todas las salidas de productos del inventario de Transportes Paquita. Este sistema mantiene la trazabilidad completa de los despachos, actualiza autom√°ticamente el stock, gestiona diferentes tipos de salidas y proporciona funcionalidades avanzadas para salidas masivas.

## üéØ Funcionalidades Principales

### üìã Listado de Salidas
- **Vista organizada**: Consulta todas las salidas registradas con informaci√≥n priorizada por peso
- **B√∫squeda integral**: Localiza salidas por responsable, producto, destino o tipo de despacho
- **Filtros de fecha**: An√°lisis temporal con rangos de fechas personalizables
- **Exportaci√≥n avanzada**: Descarga de datos filtrados en m√∫ltiples formatos
- **Actualizaci√≥n autom√°tica**: Stock disminuido autom√°ticamente con cada salida

#### Columnas Disponibles (organizadas por importancia):
1. **üë§ Responsable**: Usuario que autoriza/registra la salida (peso 1)
2. **üì¶ Producto**: Nombre del producto despachado
3. **‚ûñ Retirado**: Cantidad que sali√≥ del inventario (peso 3)
4. **üìä Cantidad Total**: Stock total actual despu√©s de la salida
5. **üìÖ Fecha**: Fecha de la salida (formato dd/mm/yyyy, peso 4)
6. **‚è∞ Hora**: Hora espec√≠fica del despacho (peso 5)
7. **üìç Destino**: Lugar o cliente de destino (peso 6)
8. **üöõ Tipo de Despacho**: Clasificaci√≥n del tipo de salida (peso 7)
9. **üìÖ Creado**: Fecha de registro en sistema (peso 8, oculta)
10. **üîÑ Actualizado**: √öltima modificaci√≥n (peso 9, oculta)

### ‚ûï Crear Nueva Salida Individual

#### Proceso completo paso a paso:

**Secci√≥n: "Datos de la salida"**

**1. Informaci√≥n del Responsable**
**üë§ Usuario Encargado** (Autom√°tico)
- Campo deshabilitado que muestra el usuario actual
- Se asigna autom√°ticamente al usuario logueado
- Icono de usuario para identificaci√≥n visual
- Garantiza trazabilidad de quien autoriza la salida

**2. Selecci√≥n del Producto**
**üì¶ Producto** (Obligatorio)
- B√∫squeda inteligente por nombre o descripci√≥n
- Lista desplegable con productos disponibles en stock
- B√∫squeda asincr√≥nica para cat√°logos grandes
- Icono de cubo para identificaci√≥n visual
- Placeholder: "Informaci√≥n del producto"

**3. Cantidad de Salida**
**‚ûñ Cantidad** (Obligatorio)
- Cantidad de productos que salen del inventario
- Solo n√∫meros positivos (m√≠nimo 1)
- Icono de resta para identificaci√≥n visual
- Mensaje de ayuda: "Debe ser mayor a 0"
- Validaci√≥n autom√°tica contra stock disponible
- Actualiza autom√°ticamente el stock del producto

**4. Informaci√≥n Temporal**
**üìÖ Fecha de Salida** (Autom√°tico/Editable)
- Se asigna autom√°ticamente la fecha actual
- Puede modificarse para registros retroactivos
- Icono de calendario para identificaci√≥n
- Formato est√°ndar del sistema

**‚è∞ Hora de Salida** (Obligatorio)
- Se asigna autom√°ticamente la hora actual
- Campo editable para ajustes precisos
- Icono de reloj para identificaci√≥n
- Importante para trazabilidad temporal

**5. Informaci√≥n de Destino**
**üìç Destino** (Obligatorio)
- Lugar, cliente o √°rea de destino de la mercanc√≠a
- Campo de texto libre (m√°ximo 255 caracteres)
- Icono de marcador de ubicaci√≥n
- Placeholder: "Destino de la mercanc√≠a"
- Fundamental para trazabilidad de distribuci√≥n

**6. Clasificaci√≥n del Despacho**
**üöõ Tipo de Despacho** (Opcional)
- Selecci√≥n entre tipos predefinidos:
  - **Env√≠o a Cliente**: Despachos a clientes externos
  - **Transferencia entre Almacenes**: Movimientos internos
  - **Devoluci√≥n a Proveedor**: Productos devueltos
  - **Merma o P√©rdida**: Productos da√±ados o perdidos
  - **Otros**: Casos especiales no clasificados
- Lista desplegable nativa para selecci√≥n r√°pida
- Icono de cami√≥n para identificaci√≥n

### üì¶ Salida Masiva de Productos

#### Funcionalidad Avanzada:
1. **Acceder**: Bot√≥n "Salida Masiva" en la parte superior de la lista
2. **Caracter√≠sticas**:
   - **Icono**: Cami√≥n para identificaci√≥n visual
   - **Color**: Advertencia (amarillo/naranja) para indicar operaci√≥n especial
   - **Modal amplio**: Ventana de 7xl para mejor visualizaci√≥n
   - **Descripci√≥n**: "Registra m√∫ltiples productos para un mismo despacho o env√≠o"

3. **Informaci√≥n Com√∫n Compartida**:
   - **Fecha y hora**: Misma para todos los productos
   - **Destino**: Destino com√∫n para todo el despacho
   - **Tipo de despacho**: Clasificaci√≥n √∫nica para toda la operaci√≥n
   - **Responsable**: Usuario logueado autom√°ticamente asignado

4. **Lista de Productos (Repetidor)**:
   - **Selecci√≥n de producto**: B√∫squeda individual por producto
   - **Cantidad**: Cantidad espec√≠fica para cada producto
   - **Validaci√≥n independiente**: Verificaci√≥n de stock para cada item
   - **Agregar/Eliminar**: Gesti√≥n din√°mica de productos en la lista

5. **Procesamiento Inteligente**:
   - **Validaci√≥n en lote**: Verificaci√≥n de stock disponible para todos los productos
   - **Actualizaci√≥n masiva**: Actualizaci√≥n autom√°tica de inventario
   - **Transacci√≥n at√≥mica**: Todo se procesa correctamente o nada se registra
   - **Notificaciones espec√≠ficas**: Alertas de √©xito o errores por producto

### ‚úèÔ∏è Editar Salida Existente

#### Modificaci√≥n controlada:
1. **Localizar**: Encuentra la salida en la lista principal
2. **Acceder**: Haz clic en el icono de l√°piz (‚úèÔ∏è) en color primario
3. **Campos modificables**:
   - **Cantidad**: Ajuste con rec√°lculo autom√°tico de stock
   - **Fecha y hora**: Correcci√≥n de timestamps si es necesario
   - **Destino**: Actualizaci√≥n de informaci√≥n de destino
   - **Tipo de despacho**: Reclasificaci√≥n del tipo de salida

4. **Validaciones especiales**:
   - **Stock disponible**: Verificaci√≥n de que los cambios no generen inconsistencias
   - **Rec√°lculo autom√°tico**: Ajuste del stock seg√∫n nueva cantidad
   - **Coherencia temporal**: Verificaci√≥n de fechas l√≥gicas
   - **Trazabilidad**: Registro de modificaciones para auditor√≠a

5. **Impacto de cambios**:
   - **Aumento de cantidad**: Mayor reducci√≥n del stock
   - **Reducci√≥n de cantidad**: Menor reducci√≥n del stock (recuperaci√≥n parcial)
   - **Cambio de producto**: Transferencia entre productos (cuidado especial)
   - **Historial**: Registro completo de modificaciones

### üëÅÔ∏è Ver Detalles de la Salida

#### Informaci√≥n completa disponible:
1. **Acceder**: Haz clic en el icono del ojo (üëÅÔ∏è) en color informativo
2. **Vista integral**:
   - **Informaci√≥n completa**: Todos los datos de la salida
   - **Producto despachado**: Detalles del producto con stock actual
   - **Responsable**: Informaci√≥n del usuario que autoriz√≥ la salida
   - **Destino y tipo**: Informaci√≥n completa de distribuci√≥n
   - **Impacto en stock**: C√≥mo afect√≥ el inventario total
   - **Historial**: Modificaciones realizadas si las hay
   - **Timestamps**: Fecha y hora exacta de registro y modificaciones

### üóëÔ∏è Eliminar Salida

#### Proceso seguro de eliminaci√≥n:
1. **Seleccionar**: Haz clic en el icono de papelera (üóëÔ∏è) en color de peligro
2. **Validaciones cr√≠ticas**:
   - **Verificaci√≥n de dependencias**: Revisi√≥n de transacciones relacionadas
   - **Impacto en stock**: Confirmaci√≥n de que la eliminaci√≥n es segura
   - **Estado actual**: Verificaci√≥n del estado actual del inventario

3. **Confirmaci√≥n m√∫ltiple**: Requiere confirmaci√≥n expl√≠cita del usuario
4. **Reversi√≥n autom√°tica**: Al eliminar, se incrementa autom√°ticamente el stock del producto

## üîß Funciones Avanzadas

### üîç Sistema de B√∫squeda y Filtros
- **B√∫squeda por responsable**: Localiza salidas por usuario espec√≠fico
- **B√∫squeda por producto**: Encuentra todas las salidas de un producto
- **B√∫squeda por destino**: Localiza env√≠os a destinos espec√≠ficos
- **Filtro por tipo de despacho**: Clasifica por tipo de salida
- **Filtro de fechas**: Rango personalizable para an√°lisis temporal
- **B√∫squeda combinada**: M√∫ltiples criterios simult√°neos

### üìä Reportes y Exportaci√≥n
- **Exportaci√≥n masiva**: Descarga datos de salidas filtradas
- **Formato Excel**: Integraci√≥n con herramientas de an√°lisis externas
- **Datos relacionales**: Incluye informaci√≥n de productos, usuarios y destinos
- **Filtros aplicados**: Respeta los filtros activos en la exportaci√≥n
- **An√°lisis de distribuci√≥n**: Reportes por destino y tipo de despacho

### üîÑ Automatizaciones del Sistema
- **Actualizaci√≥n de stock**: Autom√°tica con cada salida registrada
- **Asignaci√≥n de usuario**: Autom√°tica del usuario logueado
- **Timestamp autom√°tico**: Registro de fecha y hora actual
- **Validaciones de stock**: Verificaci√≥n autom√°tica de disponibilidad
- **Notificaciones**: Alertas de √©xito, errores o stock insuficiente

### üìà An√°lisis de Distribuci√≥n
- **Seguimiento de salidas**: Historial completo por producto
- **An√°lisis de destinos**: Productos m√°s enviados por destino
- **Evaluaci√≥n de tipos**: Distribuci√≥n por tipo de despacho
- **Tendencias temporales**: Patrones de salida por per√≠odos
- **Control de stock**: Monitoreo de niveles despu√©s de salidas

## üí° Mejores Pr√°cticas de Uso

### üèóÔ∏è Registro de Salidas
1. **Informaci√≥n precisa**:
   - Verifica disponibilidad de stock antes de registrar
   - Utiliza destinos espec√≠ficos y descriptivos
   - Registra la fecha y hora real de la salida
   - Clasifica correctamente el tipo de despacho

2. **Validaci√≥n f√≠sica**:
   - Confirma f√≠sicamente la salida antes de registrar
   - Verifica que el producto corresponde al seleccionado
   - Cuenta exactamente la cantidad despachada
   - Documenta cualquier observaci√≥n relevante

3. **Uso de salida masiva**:
   - Ideal para despachos de m√∫ltiples productos al mismo destino
   - Utiliza para transferencias entre almacenes
   - Aprovecha para env√≠os completos a clientes
   - Mant√©n coherencia en fecha, destino y tipo de despacho

### üìù Gesti√≥n de Destinos
1. **Consistencia en nomenclatura**:
   - Utiliza nombres est√°ndar para destinos frecuentes
   - Mant√©n formato uniforme (ej: "Sucursal Central", "Cliente ABC")
   - Evita abreviaciones confusas
   - Incluye informaci√≥n de ubicaci√≥n si es relevante

2. **Clasificaci√≥n de tipos**:
   - **Env√≠o a Cliente**: Para ventas y entregas comerciales
   - **Transferencia**: Para movimientos entre ubicaciones propias
   - **Devoluci√≥n**: Para productos que regresan a proveedores
   - **Merma**: Para productos da√±ados, vencidos o perdidos
   - **Otros**: Solo para casos especiales bien documentados

### üîÑ Control de Inventario
1. **Verificaci√≥n de stock**:
   - Confirma disponibilidad antes de programar salidas
   - Revisa niveles m√≠nimos despu√©s de salidas importantes
   - Identifica productos con rotaci√≥n alta para reposici√≥n
   - Monitorea productos que se acercan a stock m√≠nimo

2. **Planificaci√≥n de despachos**:
   - Agrupa salidas por destino cuando sea posible
   - Programa salidas considerando disponibilidad de transporte
   - Coordina con √°reas de compras para reposici√≥n oportuna
   - Mant√©n comunicaci√≥n con clientes sobre disponibilidad

## üîó Integraci√≥n con el Ecosistema

### üì¶ Impacto en M√≥dulos Relacionados
- **Productos**: Actualizaci√≥n autom√°tica de stock por cada salida
- **Stock**: Disminuci√≥n autom√°tica de cantidad disponible
- **Usuarios**: Trazabilidad de responsables de cada salida
- **Entradas**: Balanceado con entradas para control de inventario
- **Reportes**: Datos para an√°lisis de rotaci√≥n y distribuci√≥n

### üìä Reportes Derivados
- **An√°lisis de salidas**: Estad√≠sticas por producto, per√≠odo, destino
- **Evaluaci√≥n de rotaci√≥n**: Productos con mayor/menor movimiento de salida
- **Seguimiento de destinos**: An√°lisis de distribuci√≥n por ubicaci√≥n
- **Control de tipos**: Estad√≠sticas por tipo de despacho
- **Balance de inventario**: Comparaci√≥n entre entradas y salidas

### üîÑ Integraciones Futuras
- **Sistemas de transporte**: Conexi√≥n con gesti√≥n de flota y entregas
- **CRM de clientes**: Integraci√≥n con informaci√≥n de clientes
- **C√≥digos de barras**: Lectura autom√°tica para agilizar despachos
- **Firmas digitales**: Confirmaci√≥n digital de recepciones
- **GPS tracking**: Seguimiento de entregas en tiempo real

## ‚ö†Ô∏è Consideraciones Importantes

### üö´ Restricciones del Sistema
- **Cantidades positivas**: Solo se permiten valores mayores a cero
- **Stock disponible**: No se puede despachar m√°s de lo disponible
- **Producto obligatorio**: Toda salida debe asociarse a un producto existente
- **Usuario autom√°tico**: No se puede cambiar el usuario responsable
- **Destino obligatorio**: Campo requerido para trazabilidad

### üîÑ Validaciones Cr√≠ticas
- **Stock suficiente**: Verificaci√≥n autom√°tica de disponibilidad antes de confirmar
- **Fechas v√°lidas**: Validaci√≥n de coherencia temporal
- **Productos activos**: Solo productos activos pueden tener salidas
- **Integridad relacional**: Mantenimiento de consistencia entre m√≥dulos

### üìà Consideraciones de Performance
- **Salidas masivas**: Optimizaci√≥n para procesamiento de m√∫ltiples productos
- **B√∫squedas eficientes**: √çndices optimizados para consultas frecuentes
- **Validaciones r√°pidas**: Verificaciones de stock en tiempo real
- **Exportaci√≥n controlada**: Limitaciones apropiadas para evitar sobrecarga

### üîí Seguridad y Auditor√≠a
- **Trazabilidad completa**: Registro de usuario, fecha y hora de cada operaci√≥n
- **Historial inmutable**: Los registros hist√≥ricos conservan integridad
- **Control de stock**: Validaciones estrictas para evitar inconsistencias
- **Autorizaci√≥n**: Verificaci√≥n de permisos para cada tipo de operaci√≥n

## üîê Permisos y Roles

### Niveles de Acceso Recomendados:
- **üëÅÔ∏è Visualizaci√≥n**: Consultar historial de salidas y stock
- **‚ûï Registro Individual**: Crear salidas de productos individuales
- **üì¶ Salida Masiva**: Acceso a funcionalidad de salida masiva
- **‚úèÔ∏è Edici√≥n**: Modificar salidas existentes (con restricciones temporales)
- **üóëÔ∏è Eliminaci√≥n**: Eliminar salidas (solo roles administrativos, tiempo limitado)
- **üìä Exportaci√≥n**: Descargar reportes y an√°lisis

### Roles T√≠picos:
- **üîß Administrador de Inventario**: Acceso completo a todas las funciones
- **üì¶ Jefe de Almac√©n**: Registro, edici√≥n y salida masiva
- **üöõ Supervisor de Despacho**: Registro individual y masivo, consultas
- **üì§ Operador de Salida**: Solo registro de salidas individuales
- **üëÅÔ∏è Auditor**: Solo consulta para verificaciones y reportes
- **üìä Analista**: Consultas y exportaci√≥n para an√°lisis de negocio

### üîí Controles de Seguridad
- **Registro autom√°tico**: Usuario responsable se asigna autom√°ticamente
- **Validaci√≥n de stock**: Verificaci√≥n obligatoria de disponibilidad
- **Timestamps inmutables**: Fecha y hora de registro protegidas
- **Trazabilidad completa**: Historial de todos los cambios realizados
- **Autorizaci√≥n por operaci√≥n**: Verificaci√≥n de permisos espec√≠ficos

### üö® Alertas y Notificaciones
- **Stock bajo**: Alerta cuando productos llegan a nivel m√≠nimo
- **Stock insuficiente**: Notificaci√≥n al intentar despachar m√°s de lo disponible
- **Salidas masivas**: Confirmaci√≥n de procesamiento exitoso o errores
- **Modificaciones**: Notificaci√≥n de cambios en salidas existentes

---
*Manual del M√≥dulo de Salidas - Sistema de Inventario Transportes Paquita*
